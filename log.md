					Number 0:

The Whisper model is a transformer-based neural vocoder. It was trained on LJSpeech and can be used to generate speech given the text transcript or the mel spectrogram of an audio file.
Prerequisites:
Python >= 3.6
PyTorch 1.3+ (1.4 recommended)
torchaudio 0.3+ (0.4 recommended) for loading audio files and doing preprocessing steps such as STFT, Mel Spectrogram extraction etc... If you don't want to use torchaudio, you can still load your own audio files but you'll have to implement those preprocessing steps yourself in PyTorch/Tensorflow/Numpy or whatever framework you're using for inference with this model! You also need it if you want to train your own models from scratch with our training scripts! This library will not work without it! Please refer to its documentation here: https://github.com/pytorch/audio . Note that we are working on removing this dependency in future versions of this library by providing our own implementation of these preprocessing steps so that users won't have to install torchaudio just for inference purposes ! Stay tuned :)
tqdm 4+ (for progress bars) - Optional but highly recommended since most scripts rely on tqdm's progress bar functionality! Install it via pip install tqdm . Without tqdm , no progress bars will be displayed during training / evaluation / generation ! The code should still run just fine though ;) You may also need ffmpeg installed if you plan on generating waveforms from generated mel spectrograms (see Generation section below). This is optional however as only one script requires ffmpeg at the moment (the one which converts generated mel spectrograms into waveforms). For more information about how we generate waveforms from mel spectrograms, please see "Generating Waveforms" below under "Inference". We recommend installing ffmpeg via conda : conda install -c conda-forge ffmpeg . If all else fails, try brew install ffmpeg . See here for more details regarding installation options: https://www.ffmpeg.org/download #installation

    Usage

    Installation

    pip install transformers==2.*.*  # 2.*.* refers to version 2 releases e g 2 7 0 or greater OR git clone https github com huggingface transformers cd transformers python setup py develop

        Getting Started

        Inference Example Code Snippet Here s a quick example showing how easy it is to get started with inference using the pretrained WhisperModel class To learn more about each argument click on show defaults above def infer(model_name_or_path = whisper large checkpoint step=12000): import torch from transformers import AutoTokenizer AutoModelWithLMHead tokenizer = AutoTokenizer config = AutoConfig args = {'max source positions': 1500 'max target positions': 448} model = AutoModelWithLMHead config=config args=args device='cpu') tokenized input ids output past key values decoder attention mask encoder attention mask labels speaker embeddings position ids head mask top k ppl beam size length penalty no repetition penalty do sample pad token id bos token id eos token id num return sequences max length min length temperature repitition penalty bad words idxs stop tokens num beams seed device allow streaming early stopping padding text do return full outputs print function verbose logging level out dir overwrite cache disable cache save caching strategy eval str split batch size dataset shuffle datapoints sequential batches sampler distributed world size local rank prediction loss only fp 16 optimize gradient accumulation steps fp16 no amp grad norm arg max decoding block trie prefixes decode mode activation function predict dtype evaluate langauge metrics per task language metric names tensorboard logdir tensorshape summary writer comment log metric keys ignore indexed datasets sortish sampling add start document symbol add end document symbol remove accent strip normalize punctuation lowercase truncate sequence pair rng seeds prune head root seed compute metrics over tokens ngrams filter useless tokens keep order preserve sentence piece vocabulary shrink factor apply erasure coding chunk sizes shard splits erase probability random word deletion probabilty swap word probability insertion probability contiguous deletion probability random deletion probability delete whole word frequency threshold delete whole words threshold blanking probabilty blanking pattern replacement string replace unknown charachter with unk replace infrequent characters with unk character coverage minimum number of times a character must appear before being kept maximum number of added special chars maximum number of samples per epoch maximum sequence lenght when sampling data randomly average samples per second total duration in seconds total amount of memory consumed by cached features megabytes total amount of memory consumed by cached features gigabytes warmup ratio learning rate decay schedule warmup iterations adam betas adam weight decay adafrac beta1 adam beta2 adam epsilon amsgrad correct bias true gradient clipping default global step scheduler patience scheduler factor scheduler reduce lr patience scheduler cooldown cosine annealing eta min cosine annealing multistep milestones cosine annealing restart every restart every cosine annealing restart after restarts exponential decay gamma polynomial decay power cycle interval polynomial decay cycle frac linear warmup slope inverse square root scheduling alpha inverse square root scheduling initial delay constant scheduling lambda constant scheduling last update hyperbolic tangent parameter hyperbolic tangent schedule cut off value triangular cyclical momentum base triangular cyclical momentum max triangular cyclical momentum scale triangular cyclical learning rate base triangular cyclical learning rate max triangular cyclical learning rate scale slanted triangle schedule cut off slanted triangle schedule scale flat restarts reset optimizer parameters reset stateful optimizers use tf amp mixed precision optimization level omp num threads mkl thread count cpu affinity set mem growth enable xla jit device placement logger name quiet debug info warning error critical set seed manual seed cudnn benchmark deterministic cudnn determinism parallel fast unsafe math fuse modules deterministic fused kernel bool store fusion buffer bool type store fusion buffer int64 type cast storage pinned memory allocation reserve cpu ram limit gpu ram limit master address master port world size backend init method group name dist url env timeout process group gloo tcp cluster node rank local rank distributed backend ddp process group gloo tcp urls timeout processes nodes ranks node rank local rank multiprocessing spawn backend init method spawn start method spawn exit code worker cleanup time sleep seconds single connection attempt connect retries connect wait seconds socket send recv bytes socket send recv timeout ms queue put wait forever queue close timeout ms shared memory path shared memory byte stream handle shared memory offset bytes barrier put wait forever barrier close timeout ms file descriptor inheritance fork exec child poll interrup signal workers daemon daemon exit groups terminate join reload force kill reload pause between killing children reload pause between respawning children reload check frequency milliseconds shutdown gracefully shutdown gracefully check frequency milliseconds shutdown gracefully poll interrup signal shutdown gracefully poll interrup sigkill shut down other workers first warn once initialized non blocking pipe read write bytes initialization polling interval milliseconds initialization polling interval microseconds initialize parent process group initialize pgid atfork after fork daemonic processes create session leader redirect stderr stdout redirected stderr filename redirected stdout filename redirect stdin filename redirection filenames include pid prepend pid append pid temp directory temporary filenames unique identifier uuid namespace uuid namespace mac address ip address hostname domain name computer name user identifier user identifier current effective user identifier real user identifier machine identifiers platform system release machine processor architecture hardware platform os release distribution codename linux distribution major version linux distribution minor version linux distribution patch version libcxx abi libstdcxx abi win32 gui windows service event loop policy select epoll devpoll poll windows selectable waits auto io events io multiplexer io multiplexer provider iocp proactor iocp proactor instance kqueue kevent proc self status open file descriptors resource usage resident set pagesize stack depth frames peak stack depth frames soft limit stacksize hard limit stacksize virtual addresses space physical addresses space virtual addresses peak space physical addresses peak space virtual addresses free space physical addresses free space locked pages in core locked pages allowed locks held lock limits lock limits soft lock limits hard mallinfo arena smallbin blocks treebin blocks smallbin extents treebin extents mmapped regions mmap footprint page reclaims page faults swaps fs reads fs writes fs writes sync fs writes async big heap allocations big heap freed allocated unfreed allocated unfreed freed tracemalloc domain traceback enabled tracemalloc frame skip tracemalloc format traceback line format traceback lines context environment variable lookup table environment variables expanduser expand vars shell command execute shell commands popen streams pipes popen streams buffersizes buffered reader line buffering buffered writer line buffering subprocess call check subprocess output encoding capture output encoding capture errors universal newlines input universal newlines errors universal newlines combine errput combine errput pass through standard error standard error passthrough standard input encoding sys stdin binary sys stdin text sysstdoutencoding sysstdourencoding binary syserrorseoncoading syserrorseoncoading binary warnings module filters warnings show record warnings module default action flush print flush print calls unicode literals merge dict list dict list recursive dict update recursive dict update raise exception merge lists raise exception duplicate keys override duplicates override nested structure pretty repr indent nested structure pretty repr width nested structure pretty repr compact nested structure pretty repr sort keys json dumps separators json loads parse float json loads parse int json loads object pairs hook yaml safe dump explicit start yaml safe dump explicit end yaml safe dump tags yaml safe load typ tag resolver typ tag resolver resolve alias typ tag resolver resolve scalar typtagresolverscalartype typtagresolverscalartypestring typtagresolverscalartypenumber typtagresolverscalaritypebool typtagresolveryamltimestampformat timelibparsefractionalseconddigits timelibparseallowdateonly timelibparseallowrelativeformats pyyamlloaderconstructormappingtag pyyamlloadercreatescanner pyyamldumpdefaultstyle pickle protocol pickle fix imports pickle encode latin1 pickle uncompressed pickeled objects larger than marshall dumps false unmarshall loads false marshall dumps true unmarshall loads true xml elementtree parser xml elementtree qnames xml elementtree attribute quoting xml dom minidom parser html entity escape html entity unescape html parser strict formatter simple formatter color scheme console ansi colors console font bold console font italic console font underline style sheet background color style sheet border radius style sheet border style style sheet border width stylesheet box shadow stylesheet height stylesheet margin bottom stylesheet margin left stylesheet margin right stylesheet margin top stylessheetsmooth scrollingstylesheettopstylesheettext align centerstylesheettext align leftstylesheettext align rightstylesshetteext decoration nonecssclassfont family sans serif monospacecssclassfontsize 10px 12px 14px 16px 18px 20px 22 pxcssclasswidth 100% 150 200 250 300 350 400 450 500 550 600 650 700 750 800 850 900 950 1000 1050 1100 1150 1200 1250 1300 1350 1400 1450 1500 1550 1600 1650 1700 1750 1800 1850 1900 1950 2000 2050 2100 21 50 2200 22 50 2300 23 50 2400 24 50 2500 25 00 25 50 2600 26 00 26 60 2700 27 30 2800 28 30 2900 29 30 3000 3030 31 00 32 00 3300 34 00 3500 3660 3770 3890 4020 41 70 4340 4510 4710 4920 5160 5420 5710 6030 6400 6880 7430 8080 8840 9760 10870 12280 13890 15890 18350 21270 24760 28940 33930 39890 46980 55490 66060 78990 94470 113630 137180 165690 199790 240870 290290 349430 420370 504170 603120 718130 851740 1009410 1195270 1413650 1671410 1974520 2330140 2746590 3232460 3797880 4468970 5262920 6205830 7315190 8619470 10157320 11973770 14125390 16655110 19628010 23099340 27213610 32038360 37734230 44375460 52195660 61478880 72508100 85582300 101278900 119983000 142185000 168482000 198681000 234250000 275839000 324216000 380220000 445863000 522531000 611909000 715879000 835954000 975421000 1140159 000 1343349 000 1579993 000 1865562 000 2206676 000 2621988 000 3031173 0000 3559357 0000 4128747 0000 4754611 0000 5446757 0000 6326943 0000 7330577 000000 8499716 000000 9907720 000000 11596279000000 1352330000000 1574670000000 1832620000000 2133040000000 2484050000000 2884430000000 33439700000000 38722400000000 44756300000000 516741000000
